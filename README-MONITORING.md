# ğŸ“Š æ–°é—»è®¢é˜…ç³»ç»Ÿ - å®Œæ•´ç›‘æ§æ–¹æ¡ˆ

## ğŸ¯ ç›‘æ§åŠŸèƒ½æ¦‚è§ˆ

æœ¬ç³»ç»Ÿé›†æˆäº†å®Œæ•´çš„å…è´¹ç›‘æ§è§£å†³æ–¹æ¡ˆï¼Œæ‰€æœ‰å·¥å…·éƒ½æ”¯æŒæœ¬åœ°éƒ¨ç½²ï¼š

### âœ… å·²éƒ¨ç½²çš„ç›‘æ§å·¥å…·

| å·¥å…· | åŠŸèƒ½ | è®¿é—®åœ°å€ | ç”¨æˆ·å/å¯†ç  |
|------|------|----------|-------------|
| **å¥åº·æ£€æŸ¥** | ç³»ç»ŸçŠ¶æ€ç›‘æ§ | `http://localhost:3001/api/v1/health` | - |
| **Prometheus** | æŒ‡æ ‡é‡‡é›† | `http://localhost:9090` | - |
| **Grafana** | å¯è§†åŒ–ä»ªè¡¨æ¿ | `http://localhost:3002` | admin/admin |
| **AdminJS** | æ•°æ®åº“ç®¡ç† | `http://localhost:3001/admin` | admin@example.com/admin123 |
| **Redis Commander** | Redis ç®¡ç† | `http://localhost:8081` | - |
| **Winston æ—¥å¿—** | ç»“æ„åŒ–æ—¥å¿— | `backend/logs/` | - |

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### æ–¹æ³•ä¸€ï¼šä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰
```bash
./start-unified.sh
```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å¯åŠ¨
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up --build -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

---

## ğŸ“ˆ ç›‘æ§æŒ‡æ ‡è¯´æ˜

### 1. ç³»ç»Ÿå¥åº·æ£€æŸ¥
- **ç«¯ç‚¹**: `/api/v1/health`
- **åŠŸèƒ½**: æ£€æŸ¥æ•°æ®åº“ã€å†…å­˜ã€ç£ç›˜çŠ¶æ€
- **è¿”å›**: JSON æ ¼å¼çš„å¥åº·çŠ¶æ€

### 2. Prometheus æŒ‡æ ‡
- **ç«¯ç‚¹**: `/api/v1/metrics`
- **æŒ‡æ ‡ç±»å‹**:
  - HTTP è¯·æ±‚è®¡æ•°å’Œå»¶è¿Ÿ
  - å†…å­˜ä½¿ç”¨æƒ…å†µ
  - æ´»è·ƒè¿æ¥æ•°
  - æ•°æ®åº“è¿æ¥æ•°

### 3. ä¸šåŠ¡ç»Ÿè®¡ API
- **ç³»ç»Ÿç»Ÿè®¡**: `/api/v1/monitoring/stats`
- **æ•°æ®åº“ç»Ÿè®¡**: `/api/v1/monitoring/database-stats`
- **çˆ¬è™«ç»Ÿè®¡**: `/api/v1/monitoring/crawler-stats`
- **ç”¨æˆ·ç»Ÿè®¡**: `/api/v1/monitoring/user-stats`

---

## ğŸ”§ ç®¡ç†åŠŸèƒ½

### AdminJS ç®¡ç†åå°
- **è®¿é—®**: http://localhost:3001/admin
- **åŠŸèƒ½**:
  - ç”¨æˆ·ç®¡ç†
  - æ–‡ç« ç®¡ç†
  - æ•°æ®æºç®¡ç†
  - è®¢é˜…ç®¡ç†
- **è®¤è¯**: admin@example.com / admin123

### Redis ç®¡ç†
- **è®¿é—®**: http://localhost:8081
- **åŠŸèƒ½**: Redis æ•°æ®æŸ¥çœ‹å’Œç®¡ç†

---

## ğŸ“Š Grafana ä»ªè¡¨æ¿

### é¢„é…ç½®ä»ªè¡¨æ¿
- **ç³»ç»Ÿç›‘æ§**: åº”ç”¨çŠ¶æ€ã€è¯·æ±‚é€Ÿç‡ã€å“åº”æ—¶é—´
- **èµ„æºç›‘æ§**: å†…å­˜ä½¿ç”¨ã€è¿æ¥æ•°
- **æ•°æ®åº“ç›‘æ§**: è¿æ¥çŠ¶æ€ã€æŸ¥è¯¢æ€§èƒ½

### è‡ªå®šä¹‰ä»ªè¡¨æ¿
1. ç™»å½• Grafana (admin/admin)
2. åˆ›å»ºæ–°çš„ Dashboard
3. æ·»åŠ  Prometheus æ•°æ®æº
4. é…ç½®æŸ¥è¯¢è¯­å¥

---

## ğŸ“ æ—¥å¿—ç³»ç»Ÿ

### Winston æ—¥å¿—é…ç½®
- **é”™è¯¯æ—¥å¿—**: `backend/logs/error.log`
- **ç»¼åˆæ—¥å¿—**: `backend/logs/combined.log`
- **æ§åˆ¶å°è¾“å‡º**: å½©è‰²æ ¼å¼åŒ–æ—¥å¿—

### æ—¥å¿—çº§åˆ«
- `error`: é”™è¯¯ä¿¡æ¯
- `warn`: è­¦å‘Šä¿¡æ¯
- `info`: ä¸€èˆ¬ä¿¡æ¯
- `debug`: è°ƒè¯•ä¿¡æ¯

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æœåŠ¡æ— æ³•å¯åŠ¨**
   ```bash
   # æ£€æŸ¥ç«¯å£å ç”¨
   lsof -i :3001,3002,9090,8081
   
   # é‡å¯æœåŠ¡
   docker-compose restart
   ```

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   ```bash
   # æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
   docker-compose ps postgres
   
   # æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
   docker-compose logs postgres
   ```

3. **Prometheus æ— æ³•é‡‡é›†æŒ‡æ ‡**
   ```bash
   # æ£€æŸ¥åº”ç”¨æŒ‡æ ‡ç«¯ç‚¹
   curl http://localhost:3001/api/v1/metrics
   
   # æ£€æŸ¥ Prometheus é…ç½®
   docker-compose logs prometheus
   ```

### æ€§èƒ½ä¼˜åŒ–

1. **è°ƒæ•´æ—¥å¿—çº§åˆ«**
   ```typescript
   // ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ 'warn' æˆ– 'error'
   level: 'info'
   ```

2. **é…ç½®æ—¥å¿—è½®è½¬**
   ```typescript
   maxsize: 5242880, // 5MB
   maxFiles: 5
   ```

---

## ğŸ“š API æ–‡æ¡£

### å¥åº·æ£€æŸ¥ API
```bash
# å®Œæ•´å¥åº·æ£€æŸ¥
GET /api/v1/health

# æ•°æ®åº“æ£€æŸ¥
GET /api/v1/health/database

# å†…å­˜æ£€æŸ¥
GET /api/v1/health/memory

# ç£ç›˜æ£€æŸ¥
GET /api/v1/health/disk
```

### ç›‘æ§ç»Ÿè®¡ API
```bash
# ç³»ç»Ÿç»Ÿè®¡
GET /api/v1/monitoring/stats

# æ•°æ®åº“ç»Ÿè®¡
GET /api/v1/monitoring/database-stats

# çˆ¬è™«ç»Ÿè®¡
GET /api/v1/monitoring/crawler-stats

# ç”¨æˆ·ç»Ÿè®¡
GET /api/v1/monitoring/user-stats
```

---

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤å¯†ç **
   - Grafana: ç™»å½•åä¿®æ”¹ admin å¯†ç 
   - AdminJS: ä¿®æ”¹è®¤è¯é€»è¾‘

2. **ç”Ÿäº§ç¯å¢ƒé…ç½®**
   - ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿä¿¡æ¯
   - å¯ç”¨ HTTPS
   - é…ç½®é˜²ç«å¢™è§„åˆ™

3. **æ—¥å¿—å®‰å…¨**
   - é¿å…è®°å½•æ•æ„Ÿä¿¡æ¯
   - å®šæœŸæ¸…ç†æ—¥å¿—æ–‡ä»¶
   - é…ç½®æ—¥å¿—è®¿é—®æƒé™

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æœåŠ¡çŠ¶æ€: `docker-compose ps`
2. æœåŠ¡æ—¥å¿—: `docker-compose logs [service_name]`
3. å¥åº·æ£€æŸ¥: `curl http://localhost:3001/api/v1/health`

---

**ğŸ‰ ç›‘æ§ç³»ç»Ÿéƒ¨ç½²å®Œæˆï¼æ‰€æœ‰å·¥å…·éƒ½æ˜¯å…è´¹ä¸”æ”¯æŒæœ¬åœ°éƒ¨ç½²çš„ã€‚**
