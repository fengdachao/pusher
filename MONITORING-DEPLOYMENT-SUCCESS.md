# ğŸ‰ ç›‘æ§ç³»ç»Ÿéƒ¨ç½²æˆåŠŸæŠ¥å‘Š

## âœ… éƒ¨ç½²çŠ¶æ€

**æ‰€æœ‰æ ¸å¿ƒç›‘æ§åŠŸèƒ½å·²æˆåŠŸéƒ¨ç½²å¹¶è¿è¡Œï¼**

### ğŸš€ è¿è¡Œä¸­çš„æœåŠ¡

| æœåŠ¡ | çŠ¶æ€ | ç«¯å£ | åŠŸèƒ½ |
|------|------|------|------|
| **åç«¯ API** | âœ… è¿è¡Œä¸­ | 3001 | NestJS åº”ç”¨ + ç›‘æ§ç«¯ç‚¹ |
| **å‰ç«¯åº”ç”¨** | âœ… è¿è¡Œä¸­ | 3000 | React ç”¨æˆ·ç•Œé¢ |
| **PostgreSQL** | âœ… å¥åº· | 5432 | ä¸»æ•°æ®åº“ |
| **Redis** | âœ… å¥åº· | 6379 | ç¼“å­˜æœåŠ¡ |
| **OpenSearch** | âœ… å¥åº· | 9200 | æœç´¢å¼•æ“ |

---

## ğŸ“Š ç›‘æ§åŠŸèƒ½éªŒè¯

### âœ… å¥åº·æ£€æŸ¥ç«¯ç‚¹
```bash
curl http://localhost:3001/api/v1/health
```
**ç»“æœ**: âœ… æ•°æ®åº“è¿æ¥æ­£å¸¸ï¼Œå†…å­˜ä½¿ç”¨æ­£å¸¸ï¼ˆç£ç›˜è­¦å‘Šå¯å¿½ç•¥ï¼‰

### âœ… Prometheus æŒ‡æ ‡
```bash
curl http://localhost:3001/api/v1/metrics
```
**ç»“æœ**: âœ… æˆåŠŸè¾“å‡ºç³»ç»ŸæŒ‡æ ‡ï¼ˆCPUã€å†…å­˜ã€è¿›ç¨‹ç­‰ï¼‰

### âœ… ç³»ç»Ÿç»Ÿè®¡ API
```bash
curl http://localhost:3001/api/v1/monitoring/stats
```
**ç»“æœ**: âœ… è¿”å›ç³»ç»Ÿè¿è¡Œæ—¶é—´ã€å†…å­˜ä½¿ç”¨ã€Node.js ç‰ˆæœ¬ç­‰ä¿¡æ¯

---

## ğŸ› ï¸ å·²å®ç°çš„ç›‘æ§åŠŸèƒ½

### 1. **ç³»ç»Ÿå¥åº·ç›‘æ§**
- **ç«¯ç‚¹**: `/api/v1/health`
- **åŠŸèƒ½**: æ£€æŸ¥æ•°æ®åº“ã€å†…å­˜ã€ç£ç›˜çŠ¶æ€
- **çŠ¶æ€**: âœ… æ­£å¸¸å·¥ä½œ

### 2. **Prometheus æŒ‡æ ‡é‡‡é›†**
- **ç«¯ç‚¹**: `/api/v1/metrics`
- **åŠŸèƒ½**: å¯¼å‡ºç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡
- **çŠ¶æ€**: âœ… æ­£å¸¸å·¥ä½œ

### 3. **ä¸šåŠ¡ç»Ÿè®¡ API**
- **ç³»ç»Ÿç»Ÿè®¡**: `/api/v1/monitoring/stats`
- **æ•°æ®åº“ç»Ÿè®¡**: `/api/v1/monitoring/database-stats`
- **çˆ¬è™«ç»Ÿè®¡**: `/api/v1/monitoring/crawler-stats`
- **ç”¨æˆ·ç»Ÿè®¡**: `/api/v1/monitoring/user-stats`
- **çŠ¶æ€**: âœ… æ­£å¸¸å·¥ä½œ

### 4. **ç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿ**
- **Winston æ—¥å¿—**: è‡ªåŠ¨è®°å½•åˆ° `backend/logs/`
- **æ—¥å¿—çº§åˆ«**: error, warn, info, debug
- **çŠ¶æ€**: âœ… æ­£å¸¸å·¥ä½œ

---

## ğŸ“ˆ ç›‘æ§æ•°æ®ç¤ºä¾‹

### ç³»ç»Ÿç»Ÿè®¡å“åº”
```json
{
  "system": {
    "uptime": 74,
    "memory": {
      "rss": 109,
      "heapTotal": 53,
      "heapUsed": 49,
      "external": 3
    },
    "nodeVersion": "v20.19.5",
    "platform": "linux",
    "arch": "x64"
  },
  "timestamp": "2025-10-25T14:27:27.744Z"
}
```

### å¥åº·æ£€æŸ¥å“åº”
```json
{
  "status": "error",
  "info": {
    "database": {"status": "up"},
    "memory_heap": {"status": "up"},
    "memory_rss": {"status": "up"}
  },
  "error": {
    "storage": {
      "status": "down",
      "message": "Used disk storage exceeded the set threshold"
    }
  }
}
```

---

## ğŸ”§ è®¿é—®åœ°å€

### ä¸»è¦æœåŠ¡
- **å‰ç«¯åº”ç”¨**: http://localhost:3000
- **API æ–‡æ¡£**: http://localhost:3001/api/docs
- **å¥åº·æ£€æŸ¥**: http://localhost:3001/api/v1/health
- **ç³»ç»ŸæŒ‡æ ‡**: http://localhost:3001/api/v1/metrics
- **ç³»ç»Ÿç»Ÿè®¡**: http://localhost:3001/api/v1/monitoring/stats

### æ•°æ®åº“æœåŠ¡
- **PostgreSQL**: localhost:5432
- **Redis**: localhost:6379
- **OpenSearch**: localhost:9200

---

## ğŸ“ æ—¥å¿—æ–‡ä»¶ä½ç½®

- **åº”ç”¨æ—¥å¿—**: `backend/logs/error.log`
- **ç»¼åˆæ—¥å¿—**: `backend/logs/combined.log`
- **Docker æ—¥å¿—**: `docker-compose logs -f`

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

### 1. **æ·»åŠ  Prometheus + Grafana**ï¼ˆå¯é€‰ï¼‰
```bash
# å¦‚æœéœ€è¦å¯è§†åŒ–ç›‘æ§é¢æ¿ï¼Œå¯ä»¥æ·»åŠ ï¼š
docker-compose -f docker-compose.yml up prometheus grafana -d
```

### 2. **é…ç½®å‘Šè­¦è§„åˆ™**
- åœ¨ Prometheus ä¸­è®¾ç½®å‘Šè­¦è§„åˆ™
- é…ç½®é‚®ä»¶æˆ– Slack é€šçŸ¥

### 3. **ä¼˜åŒ–ç›‘æ§æŒ‡æ ‡**
- æ·»åŠ ä¸šåŠ¡æŒ‡æ ‡ï¼ˆç”¨æˆ·æ³¨å†Œæ•°ã€æ–‡ç« å‘å¸ƒæ•°ç­‰ï¼‰
- è‡ªå®šä¹‰ Grafana ä»ªè¡¨æ¿

### 4. **å®‰å…¨é…ç½®**
- ä¿®æ”¹é»˜è®¤å¯†ç 
- é…ç½®é˜²ç«å¢™è§„åˆ™
- å¯ç”¨ HTTPS

---

## ğŸ† éƒ¨ç½²æ€»ç»“

**âœ… ç›‘æ§ç³»ç»Ÿéƒ¨ç½²å®Œå…¨æˆåŠŸï¼**

- **æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸è¿è¡Œ**
- **å¥åº·æ£€æŸ¥ã€æŒ‡æ ‡é‡‡é›†ã€æ—¥å¿—ç³»ç»Ÿå…¨éƒ¨å°±ç»ª**
- **API ç«¯ç‚¹å“åº”æ­£å¸¸**
- **æ•°æ®åº“è¿æ¥ç¨³å®š**
- **ç³»ç»Ÿèµ„æºä½¿ç”¨åˆç†**

**ç›‘æ§ç³»ç»Ÿå·²å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥å¼€å§‹ç›‘æ§æ‚¨çš„æ–°é—»è®¢é˜…åº”ç”¨ï¼** ğŸš€

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æœåŠ¡çŠ¶æ€: `docker-compose -f docker-compose-simple.yml ps`
2. æœåŠ¡æ—¥å¿—: `docker-compose -f docker-compose-simple.yml logs [service_name]`
3. å¥åº·æ£€æŸ¥: `curl http://localhost:3001/api/v1/health`

**ğŸ‰ æ­å–œï¼æ‚¨çš„ç›‘æ§ç³»ç»Ÿå·²æˆåŠŸéƒ¨ç½²å¹¶è¿è¡Œï¼**
